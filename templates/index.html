<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <meta name="description" content="Detect phishing URLs using a machine learning model.">
  <meta name="keywords" content="phishing, url, cybersecurity, machine learning, classifier, python, flask">
  <meta name="author" content="Your Name">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Minimal custom styles -->
  <style>
    :root {
      --bg-grad-1: #0f172a; /* slate-900 */
      --bg-grad-2: #1e293b; /* slate-800 */
      --brand: #3b82f6;     /* blue-500 */
      --brand-2: #22d3ee;   /* cyan-400 */
    }
    body {
      min-height: 100vh;
      background: radial-gradient(1200px 800px at 20% -10%, rgba(34,211,238,0.15), transparent 60%),
                  radial-gradient(1200px 800px at 120% 110%, rgba(59,130,246,0.15), transparent 60%),
                  linear-gradient(160deg, var(--bg-grad-1), var(--bg-grad-2));
      color: #e5e7eb;
      display: flex; align-items: center;
    }
    .glass {
      backdrop-filter: blur(8px);
      background: rgba(15,23,42,0.6);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    .brand-badge {
      display: inline-flex; align-items: center; gap: .5rem;
      padding: .4rem .75rem; border-radius: 999px;
      background: linear-gradient(90deg, rgba(34,211,238,.2), rgba(59,130,246,.2));
      border: 1px solid rgba(255,255,255,0.12);
      color: #cbd5e1; font-size: .875rem;
    }
    .form-control, .btn {
      border-radius: .75rem;
    }
    .btn-brand {
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      border: none;
    }
    .btn-brand:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }
    .result-card {
      background: rgba(2,6,23,0.65);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: .75rem;
    }
    .muted {
      color: #94a3b8;
    }
    a.link-light {
      color: #bfdbfe;
      text-decoration: underline;
    }
    .footer {
      color: #93c5fd;
      opacity: .7;
      font-size: .9rem;
    }
    .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
  </style>
</head>

<body>
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">
        <div class="p-4 p-md-5 glass">
          <!-- Header -->
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 mb-4">
            <div>
              <div class="brand-badge mb-2">
                <span class="fw-semibold"></span>
                <span>•</span>
                <span></span>
              </div>
              <h1 class="h3 h-md2 fw-bold mb-1">Phishing URL Detector</h1>
              <p class="muted mb-0">Enter a URL to check if it’s potentially unsafe using a trained ML classifier.</p>
            </div>
            <div class="text-md-end">
              <small class="muted">Model status: <span class="text-info">Loaded</span></small><br>
              <small class="muted">Accuracy (test): <span class="text-success">~97%</span></small>
            </div>
          </div>

          <div class="row g-4">
            <!-- Left: Form -->
            <div class="col-12 col-md-6">
              <form method="POST" novalidate class="needs-validation" onsubmit="handleSubmit(event)">
                <label for="url" class="form-label">URL to analyze</label>
                <div class="input-group input-group-lg mb-3">
                  <span class="input-group-text bg-dark text-light border-0">https://</span>
                  <input
                    type="text"
                    class="form-control bg-dark text-light border-0"
                    id="url"
                    name="url"
                    placeholder="example.com/page"
                    value="{{ url|default('') }}"
                    required
                  >
                </div>
                <div class="d-flex gap-2">
                  <button class="btn btn-brand btn-lg px-4" type="submit" id="analyzeBtn">
                    Analyze
                  </button>
                  <button class="btn btn-outline-light btn-lg px-4" type="button" onclick="clearForm()">
                    Clear
                  </button>
                </div>
                <div id="spinner" class="mt-3 d-none">
                  <div class="spinner-border text-info" role="status" aria-hidden="true"></div>
                  <span class="ms-2">Analyzing…</span>
                </div>
                <small class="d-block mt-3 muted">
                  Tip: Include full domain. The app fetches features (WHOIS, content, references) with short timeouts.
                </small>
              </form>
            </div>

            <!-- Right: Result -->
            <div class="col-12 col-md-6">
              <div class="result-card p-4 h-100">
                <h2 class="h5 mb-3">Result</h2>

                {% set x = xx|default(-1) %}
                {% if x != -1 %}
                  <!-- Compute and present safely: If x is probability of "safe", show both -->
                  {% set p_safe = (x if x >= 0 and x <= 1 else 0) * 100 %}
                  {% set p_phish = 100 - p_safe %}

                  <p class="mb-2">Scanned URL:</p>
                  <p class="mb-3">
                    <a class="link-light" href="{{ url|default('#') }}" target="_blank" rel="noopener noreferrer">
                      {{ url|default('') }}
                    </a>
                  </p>

                  <div class="mb-3">
                    <div class="d-flex justify-content-between">
                      <small class="muted">Safety</small>
                      <small class="muted">{{ '%.1f'|format(p_safe) }}%</small>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Safety" aria-valuenow="{{ p_safe|int }}" aria-valuemin="0" aria-valuemax="100">
                      <div class="progress-bar bg-success" style="width: {{ p_safe }}%"></div>
                    </div>
                  </div>

                  <div class="mb-4">
                    <div class="d-flex justify-content-between">
                      <small class="muted">Phishing likelihood</small>
                      <small class="muted">{{ '%.1f'|format(p_phish) }}%</small>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Phishing likelihood" aria-valuenow="{{ p_phish|int }}" aria-valuemin="0" aria-valuemax="100">
                      <div class="progress-bar bg-danger" style="width: {{ p_phish }}%"></div>
                    </div>
                  </div>

                  {% if x >= 0.5 %}
                    <div class="alert alert-success p-3 mb-3" role="alert">
                      This URL looks <strong>relatively safe</strong> based on model prediction.
                    </div>
                    <div class="d-flex gap-2">
                      <a class="btn btn-outline-info" href="{{ url }}" target="_blank" rel="noopener noreferrer">Open in new tab</a>
                      <button class="btn btn-outline-light" type="button" onclick="copyUrl()">Copy URL</button>
                    </div>
                  {% else %}
                    <div class="alert alert-danger p-3 mb-3" role="alert">
                      Caution: This URL looks <strong>potentially unsafe</strong>. Proceed only if you trust the source.
                    </div>
                    <div class="d-flex gap-2">
                      <a class="btn btn-outline-danger" href="{{ url }}" target="_blank" rel="noopener noreferrer">Proceed anyway</a>
                      <button class="btn btn-outline-light" type="button" onclick="copyUrl()">Copy URL</button>
                    </div>
                  {% endif %}
                {% else %}
                  <p class="muted mb-2">No analysis yet.</p>
                  <p class="mb-0">Enter a URL on the left and click <em>Analyze</em>.</p>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Footer -->
          <div class="mt-4 pt-3 border-top border-secondary text-center">
            <p class="footer mb-0">© {{ 2025 }} Your Name • Department of Electronics / CSE • University / College</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function clearForm(){
      const url = document.getElementById('url');
      url.value = '';
      url.focus();
    }

    function copyUrl(){
      const link = "{{ url|default('') }}";
      if(!link) return;
      navigator.clipboard.writeText(link).then(()=> {
        alert('URL copied to clipboard');
      });
    }

    function handleSubmit(e){
      // simple UX spinner
      const form = e.target;
      const url = document.getElementById('url').value.trim();
      if(!url){
        e.preventDefault();
        return;
      }
      document.getElementById('spinner').classList.remove('d-none');
      // let the form submit normally to Flask
    }
  </script>
</body>
</html>
